<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>install and use bind instead of Unbound</title>
	<meta name='Generator' content='Zim 0.74.3'>
	<style type='text/css'>
		a          { text-decoration: none      }
		a:hover    { text-decoration: underline }
		a:active   { text-decoration: underline }
		strike     { color: grey                }
		u          { text-decoration: none;
					 background-color: yellow   }
		tt         { color: #2e3436;            }
		pre        { color: #2e3436;
					 margin-left: 20px          }
		h1         { text-decoration: underline;
					 color: #4e9a06; margin-bottom: 0 }
		h2         { color: #4e9a06; margin-bottom: 0 }
		h3         { color: #4e9a06; margin-bottom: 0 }
		h4         { color: #4e9a06; margin-bottom: 0 }
		h5         { color: #4e9a06; margin-bottom: 0 }
		p          { margin-top: 0              }
		span.zim-tag {
			color: #ce5c00;
		}
		div.zim-object {
			border-style:solid;
			border-width:1px;
		}
		.checked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8sMEGsKGkAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAEBUlEQVRIx62V22tdRRTGf7Nn73P2ybntnNOe3NqkPTGgLTVUUZF6QatSLOKTPgqCIqLgQ0H/A1sQQbBYCBb1QfAxiC8tSO1FqHkwJVKtjdTGNraUmObsc9nXmfGh7cGYpM1D5nHWzPetteZb3wg2eB2YqYm4zSadsMtoboiNBH/3TE0awx6j+MRoxoTg/IYRvP19TQrJS0bzhdHGSyKFkLTtjSKwMjyiEz43ynhtP6bdjBCWyFobAf7eT7VhNF/q1FRbjYjmUohlCVPwnB+6FUxMTJipqSmUUhhjEGKd3bMT4ks/Y6oLBK2Yth8hHYtCJXOix7Nf7xLMzc0xOzvLzp078TyPNE3viW3QJPXzhNWbxFFKHCmMhoLn/FHodd48vGfhapdAacXQlkFK5dL6wIUm6fuTZPuvqDQhaMUYYyiVyuQr6rXDexYuAdi3tSv1ZJNs/R/CaszzT+1na88uXFnCEnJVgivBNN8uTJKmHQI/ptOOcXNZzMz9mOqFs90OHpipWcYwlo5P4ebnuOkrvr5wgrH+h3im7y36MzuwRXYZeKha/OhP0EkadFoxQSdGSotedR/+XwMc2XvKdNUFOFqZx6LKZWIiwjgkikNmLp/hm8sH+K1zjFTHXfBYdTi+eJArzXM0GxFxoBDCopLvo/fqEwi1XPkWkGqjFo2TgB1jOYZUKZTS/D1/ncmLh7jon0IbRWoiTi59ymzzJEEQE3cStNZsGxqlfPE57MBbOR8fP3hDGalOO9fq2DlBvmZw8xa2IxACGn6TydlD/O6f5OzSV/zif0cYhLQaEXGkKBbz7Ov/AOlXV1cxgBJRI3fuSTrpTawt18kWIZN1CFuaONI0w0WOXfsI43YIggh/KUSlhqxrMz74AkOZcWBm9QkH+Gw8NDLuITi+m0yzhluSyJzBLcpblUhFxywSRAEtPwQjsKVN30CNh0uvYuOubSHLtN3J0TO1j0pmBNuFbFWRK0gyPRZpktL2I5JQkclKakNlnh54g6ocvevUr/Ai2a7wineEkcJupA3S1Wg0nVZM2E6wbEF5U5G9Q++wI7sfR7h3N8HVNstykBfzH+KJEZwiWD0aIwxCgJ0R1Mu7GXOeJSuK93bZtQIle4D9pUNU5DC5jEsu55AvZakM5NicGyEj8uuz8bUCQgj67QfY671P3vEoeC69gy695U1U7NG7XV0pUwBjDJa1/JJlWWxzHuflzQe5FJ/GsgUVuZ2t8lEkTvfc0aNHb72flBhjVicQQqCUuvM3/M+WDVguWBrMVdDXEGZlBVEUrVCU9d9s5+fnaTQa2PZyPxEIhJaI1EEoZwX4ncynp6fXrmB4eJjR0VFarRbNZnP9P9rt9gohqNVq1Ov1ZbF/AZGev3hLJ2/zAAAAAElFTkSuQmCC)}
		.xchecked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8bDYnDxEwAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAEK0lEQVRIx9WVS2hTWRjHf/eR3CY1nbxMH2YiZRQS6qO13YlMVxY3SnVcuNIBFezGpSADLoQqLu1sHJCqdCFSXFpw4YOCSH3BtFqttTNamabX3DS5bfO6uffMoglja3RGcDMHzuac7/z/53++//cd+L8P6VuCPQYZ8ADNgBd4J31DcDcQs+GnHByRocEDv0kfBSjAOlYCs11Q+gpwDegS8LMJ+3QIK0ATzEhV8Odnz5bzw8P4dJ25aJQ/WlvJ1df/K7hSLtOcTNI+Pk69rpMTgqIQhCDvh1/VSpw79+gRrRMTmLZNezLJJsPg+a5dmOEwQlFqg1sWG16/Jv7sGWXDwBACFQjC9HcwIMONKkGp4PGAJGEDS0IQmZlhnWnye3c3eiyGo6qr3WHbrJ+dJf7gAXI6zSIr72T7/fgzmT4FHnTBsgrQBfYvTU0km5vxz86iADnAm0rRPTWFt7cXZccOJJcLAGHb2K9ekT93jmwmwwdAAFpjI6Ntbfxw5879ag7l6o1sr5eHHR3IsRgeQK/M4sQE+YEB7JcvEY6zAj45SWFgAPPxYwzHoQxIkQjTPT0kIxE+Noj8sexFn4/xnh58iQTeSpHkHAdrbIzi0BCOrmNPTpK/eJHM3bt8sCyKQCiR4NWePWSiUZw1+ZLXJm4pFKLhzBlCsRh2RUXacVgeGaF47RrL58+zcP8+RrmMkCQinZ1EL1zAjERqmkH+tLYl1G3bCJw4QUjT0IA0MJfLMX/5MqmHD0nZNiUgtGULG/r7ccXjINWuWbnmqsuFu7sb/4EDNLlcBIEioNs2KUAFGmMxmk6dQm1tRZI+3xBqEkiShBQOox05Ql1nJ26gvuIUAWiKQnj/ftStW5Fk+YuF+NldsbBA4cYN9KdPmaso8Fc62ZJtk7l1C2t0FGdxESHE1xE4hkHh6lX0oSHSpRIewC/LrPf7CSgKNpCamkI/fZr8pUuIZBIcpyaBunahPp1mub+fDyMjGKUSChCsq6Nh717q9u2jbnSU0uAgRrFIwTThyhUCqRS+hgZKLS1fJvDm87SNjZGcnsYUAjcQ8vsJ9/Xh7u1FDgRQN20iks3iDA+zZFmYhQLqzZtsj8WY3L0baY2Sf55ICCKpFHUzM2SEQAJCHg+hY8fQDh5EDgRWDoRC1J88SePRo2geD0XAcBy8b98Sv3ePYDZbbf2rFQjLIphMsmDbaEBQVQkePox26BCSz7e6i4bDrDt+nGYhmBscpFAskheC4Js3bPR4qHphFYEnlcI7P4/jdqNpGu8TCe4oCsXr1z//F2ga3+/cSfTJE0qmSVYIsKzaOZDcbjKyzFIiwfvt21kMBLA07YsetzWNd+3tLLW0sH5igvT8PH9Go/z44kX+E4LGjg7GDYOcy4XlOEgLC//5P/5LCFzxOPLmzWyIx+m6fduu7v0NVGqyTSycKksAAAAASUVORK5CYII=)}
		.unchecked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8qAt8h3m8AAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAA60lEQVRIx+2VsQqDMBRF70sCLg5OLoKgjk7+lJ/hh+STXBwcnRz8ArMEkrxOFktbaC3tULzTg5e8k5vADXDq70VbobXmvu/hvQczg4heHrJfXxQFuq67blZbMc8zpmlCXddIkgTOuZcBUko45zCOI6y1Nz2xFSEEZFmGOI7fGg4A3nsQEZqmuXOu9jallACAtm3fvmutNaIoAjM/dkBECCF89KCbk4eAb+kEnIAT8EsAM0OIz3hSyrssUvss8t5fg+uIrLXPs0gIgWVZYIyBUurQyYdheO4gz3NUVQVjDNZ1PfSjpWmKsixvehfB9GBZ3NndrgAAAABJRU5ErkJggg==)}
		.migrated-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAALGPC/xhBQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB+AKHREFA8vJSnkAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAC1klEQVRIx+2VT0hUURTGf/e958w4Tc3TYowMw1GyEgwr1MqsFmbZIrIWQZsWJUjbdoHQpl3Qps0swnCRECQFYkR/TC1iKkqmfzAKTo2Vf8hoRsfR995tkRMT87RRWkUHHhy495zvnvvu933wP/75EKkkEAjIYDCIaZpIKRFCZN0kfX9xcTGtra2/irVUEolECIfDlJeXo+s6hmFkDaCqKoZhEAqFSCaTv60pqcSyLAoLC/F4PEtqDmCaJkIIKisrMybX0sdUVRWA5ubmPzdNjjI1cpXkZC/O1fV03PXgdDqRUtpPIITAsqxsDz0Z/3CZQv8uqo4N4C8/Tp2/DdM0MiZQlvk41OTkI/LW1SGtCVb5drD3eCc71wcA+VcAHA5vDd8+3UGakxiJV7i9pdQevU5T1R35pJ3MV5QW1pf+0kWBheJ2SWua8EQXZXsu4fVVYEz1sEKvof5EuxjoPvzpcRvrdp9C2gGMx6cpOHBmbImMesds7BZubwMVDTfXDnQ3vQfK7AC8wLfExMX5whyQc3q2OEnjGm5vE76SQxsfBLr77a7CNf+n0r/l6sSMtsBSnurckiIILCobAtVZhpF4gZF4jubaymj4Ch/fd380LE7bAnjc0NPxk2yqpmEuwGxF0ag+0k5uTpzZeBeaazvj0We8fXojainsb2xh2BZgbe0gSIllzSIUh63wfQ6dZ/O2fbjcKlOj58jJ3cVENESw5yErc9nf2MLQ4jwQAkV1Lqiq37/cZ9WaahJjF9AcmxiPDhLs7ePe23oOnmUwg2hSShQle96tKDjA2HAniusgo9FxnvY9Jxw7RWzGYy92QghM00x5g53qp9sHmtB58/o2umOI2NwGolMnMYUHIb7aAyiKwsjICLqu2/qBEIKUUAohMaSHSLyBSMoPTINQ6CX5+fn2AEVFRZSUlBCPx4nFYhl3L4RESjF/GEgX3pSj+Xw+/H7/b3U/AEOZFnp7O5+5AAAAAElFTkSuQmCC)}
		ul {list-style-image: none}
		/* ul rule needed to reset style for sub-bullets */

		span.insen { color: grey                }

		.pages {
			max-width: 1000px;
			 padding-left: 320px;
		}
		.menu{
			float:left; width: 300px;
		}
		hr{clear:both;}
	</style>
</head>
<body>

<!-- Header -->
<div class='header'>
	[ <a href='./HAProxy_keep_alive_for_ssh.html'>Prev</a> ]

	[ <a href='../index.html'>Index</a> ]

	[ <a href='./Install_qemu-guest-agent.html'>Next</a> ]
</div>

<hr />

<div class="menu">
<ul>
<li><a href="../CISCO_stuff.html" title="CISCO stuff" class="page">CISCO stuff</a></li>
<li><a href="../debian_boot_fix_BIOS_EFI.html" title="debian boot fix BIOS EFI" class="page">debian boot fix BIOS EFI</a></li>
<li><a href="../Dogtag_-_internal_off-line_CA.html" title="Dogtag - internal off-line CA" class="page">Dogtag - internal off-line CA</a></li>
<li><a href="../FreeIPA_with_off-line_CA.html" title="FreeIPA with off-line CA" class="page">FreeIPA with off-line CA</a></li>
<li><a href="../Ipfire_firewall_and_router.html" title="Ipfire firewall and router" class="page">Ipfire firewall and router</a></li>
<li><a href="../PFSense.html" title="PFSense" class="page">PFSense</a>
<ul>
<li><a href="./Firewall_aliases_explained.html" title="Firewall aliases explained" class="page">Firewall aliases explained</a></li>
<li><a href="./Format_disk_drive_as_MSDosFS.html" title="Format disk drive as MSDosFS" class="page">Format disk drive as MSDosFS</a></li>
<li><a href="./HAProxy_keep_alive_for_ssh.html" title="HAProxy keep alive for ssh" class="page">HAProxy keep alive for ssh</a></li>
<li><b>install and use bind instead of Unbound</b></li>
<li><a href="./Install_qemu-guest-agent.html" title="Install qemu-guest-agent" class="page">Install qemu-guest-agent</a></li>
<li><a href="./Log_rotation_vi_newsyslog.conf.html" title="Log rotation vi newsyslog.conf" class="page">Log rotation vi newsyslog.conf</a></li>
<li><a href="./PFSense_shutdown_scripts.html" title="PFSense shutdown scripts" class="page">PFSense shutdown scripts</a></li>
<li><a href="./readme.html" title="readme" class="page">readme</a></li>
<li><a href="./USB_Pendrive_on_ProxMox_VM.html" title="USB Pendrive on ProxMox VM" class="page">USB Pendrive on ProxMox VM</a></li>
</ul>
</li>
<li><a href="../Postfix_configuration_for_a_host_or_server.html" title="Postfix configuration for a host or server" class="page">Postfix configuration for a host or server</a></li>
<li><a href="../ProxMox.html" title="ProxMox" class="page">ProxMox</a></li>
<li><a href="../readme.html" title="readme" class="page">readme</a></li>
<li><a href="../Setting_up_Samba_as_an_Active_Directory_Domain_Controller.html" title="Setting up Samba as an Active Directory Domain Controller" class="page">Setting up Samba as an Active Directory Domain Controller</a></li>
<li><a href="../VM_Benchmark_using_Phoronix_Test_Suite.html" title="VM Benchmark using Phoronix Test Suite" class="page">VM Benchmark using Phoronix Test Suite</a></li>
<li><a href="../wsl.html" title="wsl" class="page">wsl</a></li>
<li><a href="../ZFS.html" title="ZFS" class="page">ZFS</a></li>
</ul>

</div>

<!-- Wiki content -->

<div class='pages'>
	<div class='heading'>
	<h1>install and use bind instead of Unbound <a name='PFSense:install and use bind instead of Unbound'></a></h1>
	</div>

	<div class='content'>
	<p>
Created Thursday 12 October 2023
</p>

<p>
REF: <a href="https://geekistheway.com/2023/03/18/configuring-dns-bind9-on-your-pfsense/" title="https://geekistheway.com/2023/03/18/configuring-dns-bind9-on-your-pfsense/" class="https">https://geekistheway.com/2023/03/18/configuring-dns-bind9-on-your-pfsense/</a>
</p>

<h2>Configuring DNS Bind9 on your pfSense<a id="configuring-dns-bind9-on-your-pfsense" class="h_anchor"></a></h2>

<p>
Posted on March 18, 2023 by Thiago Crepaldi<br>
Last Updated on March 18, 2023 by Thiago Crepaldi
</p>

<p>
If there is one annoying thing on pfSense that seems to be never fixed is its DNS Resolver service called Unbound. Release after release, the Netgate folks still struggle to identify and fix the random crashes, unexpected restarts and whatnot. In this post, we are going to install Bind9, a very solid DNS server, to replace Unbound.
</p>

<p>
<b><u>pfBlockerNG depends on Unbound, so don’t replace it with Bind if you still want to block stuff with it.</u></b>
</p>

<p>
On our setup, we are going forward recursive queries to external name servers, such as 1.1.1.1 and 1.0.0.1. The internal names/IPs will be resolved by bind through zone records of our own. For this example, I am going to assume there is a webserver.lan.example.com that must resolve to 192.168.0.100.
</p>

<p>
To get started, first access your pfSense using its IP instead of the FQDN. That is because we are going to disable the DNS Resolver before we can enable Bind. Next, go to <b>System &gt;&gt; Package Manager &gt;&gt; Available Packages</b>, find bind in the list and click on <b>Install</b>.
</p>

<p>
Once installation finishes, go to <b>Service &gt;&gt; BIND DNS</b> Server and do as follows:
</p>

<p>
<ul>
<li>Settings
<ul>
<li>Daemon settings:
<ul>
<li>Enable BIND: Checked</li>
<li>IP Version: IPv4</li>
<li>Listen On: LAN or whatever other interface you want to serve as DNS server</li>
<li>Enable Notify: Unchecked</li>
<li>Hide Version: Checked</li>
<li>Limit Memory Use: 256MB</li>
</ul>
</li>
<li>Logging options:
<ul>
<li>Enable logging: Checked</li>
<li>Logging Severity: Warning</li>
<li>Logging Options: Default</li>
</ul>
</li>
<li>Response Rate Limit:
<ul>
<li>Rate Limit: Checked</li>
<li>Limit action: Deny query</li>
<li>limit: 15</li>
</ul>
</li>
<li>Forwarder Configuration:
<ul>
<li>Enable Forwarding: Checked</li>
<li>DNSSEC Validation: On</li>
<li>Forwarder IPs: 1.1.1.1;1.0.0.1</li>
</ul>
</li>
<li>Advanced Features:
<ul>
<li>Listen port: 53</li>
<li>Control port: 8953</li>
<li>Custom Options: leave blank</li>
<li>Global Settings: leave blank</li>
</ul>
</li>
<li>Click on Save</li>
</ul>
</li>
<li>ACLs
<ul>
<li>Click on Add
<ul>
<li>General Options:
<ul>
<li>ACL Name: Trusted-ACL</li>
<li>Description: ACL for trusted clients</li>
<li>Enter IP or network range block: 192.168.0.0/24 or whatever range you use</li>
<li>Click on Save</li>
</ul></li>
</ul></li>
</ul>
</li>
<li>Views
<ul>
<li>Click on Add
<ul>
<li>General Options:
<ul>
<li>View name: Trusted-View</li>
<li>Description: Trusted IPs allowed to perform recursive DNS queries</li>
<li>Recursion: Yes</li>
<li>match-clients: Trusted-ACL</li>
<li>allow-recursion: Trusted-ACL</li>
</ul>
</li>
<li>Custom Views:
<ul>
<li>Custom Options: leave blank</li>
</ul></li>
</ul>
</li>
<li>Click on Save</li>
</ul>
</li>
<li>Zones
<ul>
<li>We need two zones, the first one is a Forward zone. Click on Add
<ul>
<li>Domain Zone Configuration
<ul>
<li>Disable this zone: Unchecked</li>
<li>Zone name: lan.example.com or whatever FQDN you use on your network</li>
<li>Description: Trusted Forward zone for lan.example.com</li>
<li>Zone Type: Master</li>
<li>View: Trusted-View</li>
<li>Reverse zone: Unchecked</li>
<li>IPv6 Reverse Zone: Unchecked</li>
<li>Response Policy Zone: Unchecked</li>
<li>Custom option: leave blank</li>
</ul>
</li>
<li>DNSSEC
<ul>
<li>Inline signing: Unchecked</li>
</ul>
</li>
<li>Master Zone Configuration
<ul>
<li>TTL: 86400</li>
<li>Nameserver: localhost</li>
<li>Base domain IP: 127.0.0.1</li>
<li>Mail Admin Zone: root@localhost or a real email</li>
<li>Serial: 1 or something like YYYYMMDDxx (e.g. 2023031701)</li>
<li>Refresh: 1d</li>
<li>Retry: 2h</li>
<li>Expire: 4w</li>
<li>Minimum: 1h</li>
<li>allow-update: None</li>
<li>Enable update-policy: Unchecked</li>
<li>allow-query: Trusted-ACL</li>
<li>allow-transfer: None</li>
</ul>
</li>
<li>Zone Domain Records:
<ul>
<li>Add an entry
<ul>
<li>Record: webserver</li>
<li>Type: A</li>
<li>Priority: leave blank</li>
<li>Alias or IP address: 192.168.0.100</li>
</ul>
</li>
<li>Register DHCP Static Mappings: Checked</li>
</ul>
</li>
<li>Custom Zone Domain Records:
<ul>
<li>leave empty</li>
</ul></li>
</ul>
</li>
<li>Add a second zone that will be you reverse zone
<ul>
<li>Domain Zone Configuration
<ul>
<li>Disable this zone: Unchecked</li>
<li>Zone name: 0.168.192.in-addr.arpa whatever network range you use on your network. Just remember it must be typed in reverse order and only the static blocks are typed.</li>
<li>Description: Trusted Reverse zone for lan.example.com</li>
<li>Zone Type: Master</li>
<li>View: Trusted-View</li>
<li>Reverse zone: Checked</li>
<li>IPv6 Reverse Zone: Unchecked</li>
<li>Response Policy Zone: Unchecked</li>
<li>Custom option: leave blank</li>
</ul>
</li>
<li>DNSSEC
<ul>
<li>Inline signing: Unchecked</li>
</ul>
</li>
<li>Master Zone Configuration
<ul>
<li>TTL: 86400</li>
<li>Nameserver: localhost</li>
<li>Base domain IP: 127.0.0.1</li>
<li>Mail Admin Zone: root@localhost or a real email</li>
<li>Serial: 1 or something like YYYYMMDDxx (e.g. 2023031701)</li>
<li>Refresh: 1d</li>
<li>Retry: 2h</li>
<li>Expire: 4w</li>
<li>Minimum: 1h</li>
<li>allow-update: None</li>
<li>Enable update-policy: Unchecked</li>
<li>allow-query: Trusted-ACL</li>
<li>allow-transfer: None</li>
</ul>
</li>
<li>Zone Domain Records:
<ul>
<li>Add an entry
<ul>
<li>Record: 1</li>
<li>Type: PTR</li>
<li>Priority: leave blank</li>
<li>Alias or IP address: webserver.lan.example.com</li>
</ul>
</li>
<li>Register DHCP Static Mappings: Checked</li>
</ul>
</li>
<li>Custom Zone Domain Records:
<ul>
<li>leave empty</li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</p>

<p>
Click on <b>Save</b> and <b>Apply settings</b> as usual.
</p>

<p>
You can test your settings by trying to resolve internal and external names and IPs using dig. Below is an example on how to test external name resolution:
</p>

<pre>
$ dig disney.com

; &lt;&lt;&gt;&gt; DiG 9.16.1-Ubuntu &lt;&lt;&gt;&gt; disney.com
;; global options: +cmd
;; Got answer:
;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 56230
;; flags: qr rd ad; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0
;; WARNING: recursion requested but not available

;; QUESTION SECTION:
;disney.com.                    IN      A

;; ANSWER SECTION:
disney.com.             0       IN      A       130.211.198.204

;; Query time: 220 msec
;; SERVER: 172.18.240.1#53(172.18.240.1)
;; WHEN: Fri Mar 17 23:51:17 EDT 2023
;; MSG SIZE  rcvd: 54
</pre>

<p>
In order to resolve the reverse IP mapping of an external server, run:
</p>

<pre>
$ dig -x 1.1.1.1

; &lt;&lt;&gt;&gt; DiG 9.16.1-Ubuntu &lt;&lt;&gt;&gt; -x 1.1.1.1
;; global options: +cmd
;; Got answer:
;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 26423
;; flags: qr rd ad; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0
;; WARNING: recursion requested but not available

;; QUESTION SECTION:
;1.1.1.1.in-addr.arpa.          IN      PTR

;; ANSWER SECTION:
1.1.1.1.in-addr.arpa.   0       IN      PTR     one.one.one.one.

;; Query time: 20 msec
;; SERVER: 172.18.240.1#53(172.18.240.1)
;; WHEN: Fri Mar 17 23:53:29 EDT 2023
;; MSG SIZE  rcvd: 87
</pre>

<p>
I hope this helps, have fun!
</p>

<h2>Bind on backup server<a id="bind-on-backup-server" class="h_anchor"></a></h2>

<br>

<p>
This sort of works well in a way. Looks like the dynamic zone files are cleared on every reboot though. So not sure if this will worrk well as a master-slave setup. Probably the best way for this to work is all slaves and the master is on a different system such as a Samba 4 DC.
</p>

<p>
on the sync tab, just add the IP address of all the backup PFSense servers along with the username and password the same as the HA setup. The config files wi l then sync across. Make sure you enable the DNS TCP/UPD port 53 on the sync network too.
</p>

<p>
just a test line  
</p>

	</div>

	<br />

	<div class='page-footer'>

	</div>

	

</div>

</body>
</html>
